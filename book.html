<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Appointment | EnvyLashes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Poppins', 'sans-serif'] },
                    colors: {
                        brand: {
                            pink: '#FF6B9D', // The specific pink from your image
                            pinkDark: '#ff4785',
                            bg: '#F8F9FC', // Very light blue-grey background
                        }
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(0,0,0,0.08)',
                        'glow': '0 10px 30px -5px rgba(255, 107, 157, 0.4)',
                    }
                }
            }
        }
    </script>

    <style>
        /* Custom Scrollbar for a premium feel */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #FF6B9D; border-radius: 4px; }
        
        /* Date Picker Icon Color Fix */
        input[type="date"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            opacity: 0.6;
            transition: 0.2s;
        }
        input[type="date"]::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
        }
    </style>
</head>

<body class="bg-brand-bg text-slate-800 antialiased min-h-screen flex flex-col">

   <section class="pt-32 pb-12 md:pt-40 md:pb-16 px-4 text-center">
    <span class="inline-block mb-4 text-xs md:text-sm font-bold uppercase tracking-[0.2em] text-brand-pink bg-pink-50 px-3 py-1 rounded-full border border-pink-100">
        Booking
    </span>
    <h1 class="text-4xl md:text-5xl font-black text-slate-900 mb-6">
        Book Your <span class="text-brand-pink">Lash Appointment</span>
    </h1>
    <p class="text-slate-500 max-w-2xl mx-auto text-lg">
        Choose your service, pick a time that works for you, and get ready to leave with lashes you’ll love.
    </p>
</section>


    <header class="bg-white fixed w-full top-0 z-50 glass border-b border-gray-100 transition-all duration-300">
        <nav class="max-w-7xl mx-auto flex items-center justify-between p-4 lg:px-8">
            <a href="index.html" class="text-2xl md:text-3xl font-extrabold text-slate-900 tracking-tighter shrink-0 hover:opacity-80 transition-opacity">
                Envy<span class="text-brand-pink">Lashes</span>
            </a>

            <input type="checkbox" id="menu-toggle" class="hidden peer">

            <div class="hidden lg:flex items-center space-x-8 text-[15px] font-semibold text-slate-600">
                <a href="index.html" class="hover:text-brand-pink transition-colors">Home</a>
                <a href="index.html#reviews" class="hover:text-brand-pink transition-colors">Reviews</a>
                <a href="mywork.html" class="hover:text-brand-pink transition-colors">My Work</a>
                <a href="policies.html" class="hover:text-brand-pink transition-colors">Policies & Hours</a>
                <a href="contact.html" class="hover:text-brand-pink transition-colors">Contact us</a>
                <a href="prices.html" class="px-5 py-2.5 bg-brand-pink text-white rounded-xl hover:bg-pink-500 transition-all shadow-lg shadow-pink-200">Book Now</a>
            </div>


            <label for="menu-toggle" class="lg:hidden cursor-pointer p-2 text-slate-900 hover:bg-white rounded-xl transition-colors">
                <svg class="w-7 h-7" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </label>

             <div class="fixed inset-x-0 top-[73px] bg-white border-b border-slate-100 shadow-xl p-6 transition-all duration-300 origin-top transform scale-y-0 opacity-0 peer-checked:scale-y-100 peer-checked:opacity-100 lg:hidden z-40">
                <ul class="flex flex-col space-y-4 text-lg font-bold text-slate-800">
                    <li><a href="index.html" class="block hover:text-brand-pink">Home</a></li>
                    <li><a href="index.html#reviews" class="block hover:text-brand-pink">Reviews</a></li>
                    <li><a href="mywork.html" class="block hover:text-brand-pink">My Work</a></li>
                    <li><a href="policies.html" class="block hover:text-brand-pink">Policies &  Hours</a></li>
                    <li><a href="contact.html" class="hover:text-brand-pink transition-colors">Contact us</a></li>
                    <li><a href="prices.html" class="sm:pl-10 px-5 py-2 bg-brand-pink text-white rounded-xl hover:bg-pink-500 transition-all shadow-lg shadow-pink-200">Book Now</a></li>
                </ul>
            </div>

        </nav>
    </header>

    <main class="flex-grow flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-6xl w-full grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <div class="lg:col-span-4 space-y-6">
                
                <div class="bg-gradient-to-br from-brand-pink to-brand-pinkDark rounded-3xl p-8 text-white shadow-glow relative overflow-hidden">
                    <div class="relative z-10 space-y-6">

                        <div class="flex items-start gap-4">
                        <div class="w-12 h-12 rounded-full bg-pink-50 flex items-center justify-center text-brand-pink shrink-0">
                            <i class='bx bx-calendar text-2xl'></i>
                        </div>

                        <div>
                            <p class="text-xs font-bold uppercase tracking-wider text-pink-100 opacity-80 mb-1">
                            You are booking
                            </p>

                            <div
                            id="selectedService"
                            class="text-lg sm:text-xl font-semibold text-white leading-snug"
                            ></div>

                            <p class="text-sm text-pink-100 mt-2 leading-relaxed">
                            Please arrive on time and remove all makeup beforehand.
                            <span class="block mt-1 font-semibold text-white">
                                We can’t wait to see you!
                            </span>
                            </p>
                        </div>
                        </div>

                    </div>
                    </div>


                <div class="bg-white rounded-3xl p-8 shadow-soft border border-slate-100">
                    <h3 class="font-bold text-slate-900 mb-5 flex items-center gap-2 text-lg">
                        <i class='bx bx-info-circle text-brand-pink text-2xl'></i> Reminder
                    </h3>
                    <ul class="space-y-4">
                        <li class="flex items-start gap-3 text-sm text-slate-600">
                            <i class='bx bx-check-circle text-brand-pink text-lg mt-0.5 shrink-0'></i>
                            <span>A <strong class="text-slate-800">$20 deposit</strong> is required to confirm your slot.</span>
                        </li>
                        <li class="flex items-start gap-3 text-sm text-slate-600">
                            <i class='bx bx-check-circle text-brand-pink text-lg mt-0.5 shrink-0'></i>
                            <span>Please arrive with clean lashes.</span>
                        </li>
                        <li class="flex items-start gap-3 text-sm text-slate-600">
                            <i class='bx bx-check-circle text-brand-pink text-lg mt-0.5 shrink-0'></i>
                            <span>Cancellations require 12hr notice.</span>
                        </li>
                    </ul>
                    <div class="mt-6 pt-6 border-t border-slate-50">
                        <a href="prices.html" class="flex items-center text-sm font-semibold text-slate-400 hover:text-brand-pink transition-colors group">
                            <i class='bx bx-left-arrow-alt mr-1 group-hover:-translate-x-1 transition-transform'></i> Change Service
                        </a>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="bg-white rounded-[2rem] shadow-soft border border-slate-100 p-8 md:p-12">
                    
                    <div class="mb-10">
                        <h1 class="text-3xl font-bold text-slate-900 mb-2">Enter Details</h1>
                        <p class="text-slate-500">Fill out the form below to secure your spot.</p>
                    </div>

                    <form id="bookingForm" class="space-y-6">
                        <input type="hidden" name="service" id="serviceInput" />

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="text-sm font-semibold text-slate-700 ml-1">Full Name</label>
                                <input type="text" id="name" placeholder="Jane Doe" required 
                                    class="w-full px-5 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-brand-pink/20 focus:border-brand-pink transition-all outline-none font-medium text-slate-700 placeholder:text-slate-400">
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-semibold text-slate-700 ml-1">Phone Number</label>
                                <input type="tel" id="phone" placeholder="(555) 000-0000" required 
                                    class="w-full px-5 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-brand-pink/20 focus:border-brand-pink transition-all outline-none font-medium text-slate-700 placeholder:text-slate-400">
                            </div>
                        </div>

                        <div class="space-y-2">
                            <label class="text-sm font-semibold text-slate-700 ml-1">Email Address</label>
                            <input type="email" id="email" placeholder="jane@example.com" required 
                                class="w-full px-5 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-brand-pink/20 focus:border-brand-pink transition-all outline-none font-medium text-slate-700 placeholder:text-slate-400">
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-2">
                                <label class="text-sm font-semibold text-slate-700 ml-1">Date</label>
                                <div class="relative">
                                    <input type="date" id="dateInput" required 
                                        class="w-full px-5 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-brand-pink/20 focus:border-brand-pink transition-all outline-none font-medium text-slate-600">
                                </div>
                            </div>
                            <div class="space-y-2">
                                <label class="text-sm font-semibold text-slate-700 ml-1">Time</label>
                                <div class="relative">
                                    <select id="timeSelect" required 
                                        class="w-full px-5 py-3.5 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-brand-pink/20 focus:border-brand-pink transition-all outline-none font-medium text-slate-600 appearance-none cursor-pointer">
                                        <option value="" disabled selected>Select Date First</option>
                                    </select>
                                    <i class='bx bx-chevron-down absolute right-5 top-1/2 -translate-y-1/2 text-xl text-slate-400 pointer-events-none'></i>
                                </div>
                            </div>
                        </div>

                        <div class="pt-6">
                            <button type="submit" id="submitBtn" class="w-full py-4 bg-brand-pink text-white text-lg font-bold rounded-xl shadow-glow hover:bg-brand-pinkDark hover:-translate-y-0.5 transition-all duration-300 flex items-center justify-center gap-2 group">
                                <span>Confirm Booking</span>
                                <i class='bx bx-right-arrow-alt text-2xl group-hover:translate-x-1 transition-transform'></i>
                            </button>
                            <p id="bookingStatus" class="text-center mt-4 text-sm font-medium min-h-[20px]"></p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-brand-light pt-20 pb-10 border-t border-pink-100">
        <div class="max-w-7xl mx-auto px-6 lg:px-8">
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 mb-16">
                
                <div class="space-y-6">
                    <a href="#" class="inline-block">
                        <h2 class="text-3xl font-extrabold text-slate-900 tracking-tight">
                            Envy<span class="text-brand-pink">Lashes</span>
                        </h2>
                    </a>
                    <p class="text-slate-600 leading-relaxed max-w-sm">
                        Where beauty meets precision. Your confidence is our priority. We are dedicated to providing the highest quality lash services tailored just for you.
                    </p>
                </div>

                <div class="lg:pl-12">
                    <h3 class="text-sm font-bold text-slate-900 uppercase tracking-wider mb-6">
                        Quick Links
                    </h3>
                    <ul class="space-y-4">
                        <li><a href="index.html" class="text-slate-600 hover:text-brand-pink hover:translate-x-1 transition-all duration-300 flex items-center gap-2">Home</a></li>
                        <li><a href="mywork.html" class="text-slate-600 hover:text-brand-pink hover:translate-x-1 transition-all duration-300 flex items-center gap-2">My Work</a></li>
                        <li><a href="policies.html" class="text-slate-600 hover:text-brand-pink hover:translate-x-1 transition-all duration-300 flex items-center gap-2">Policies</a></li>
                        <li><a href="contact.html" class="text-slate-600 hover:text-brand-pink hover:translate-x-1 transition-all duration-300 flex items-center gap-2">Contact</a></li>
                    </ul>
                </div>

                <div>
                    <h3 class="text-sm font-bold text-slate-900 uppercase tracking-wider mb-6">
                        Contact Us
                    </h3>
                    <ul class="space-y-4 text-slate-600">
                        <li class="flex items-start gap-3 group">
                            <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-pink shadow-sm group-hover:bg-brand-pink group-hover:text-white transition-colors">
                                <i class='bx bx-envelope text-xl'></i>
                            </div>
                            <div class="pt-2">
                                <a href="mailto:eenvylashes@gmail.com" class="hover:text-brand-pink transition-colors">eenvylashes@gmail.com</a>
                            </div>
                        </li>
                        <li class="flex items-start gap-3 group">
                            <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-brand-pink shadow-sm group-hover:bg-brand-pink group-hover:text-white transition-colors">
                                <i class='bx bx-phone text-xl'></i>
                            </div>
                            <div class="pt-2">
                                <a href="tel:+17743299197" class="hover:text-brand-pink transition-colors">+1 774 329-9197</a>
                            </div>
                        </li>
                    </ul>

                    <div class="mt-8 flex space-x-4">
                        <a href="https://www.instagram.com/eenvylashes/" class="w-10 h-10 flex items-center justify-center rounded-full bg-white text-brand-pink shadow-sm hover:bg-brand-pink hover:text-white transition-all duration-300 transform hover:-translate-y-1">
                            <i class='bx bxl-instagram text-xl'></i>
                        </a>
                        <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-white text-brand-pink shadow-sm hover:bg-brand-pink hover:text-white transition-all duration-300 transform hover:-translate-y-1">
                            <i class='bx bxl-facebook text-xl'></i>
                        </a>
                        <a href="#" class="w-10 h-10 flex items-center justify-center rounded-full bg-white text-brand-pink shadow-sm hover:bg-brand-pink hover:text-white transition-all duration-300 transform hover:-translate-y-1">
                            <i class='bx bxl-tiktok text-xl'></i>
                        </a>
                    </div>
                </div>
            </div>

            <div class="pt-8 border-t border-rose-200 flex flex-col md:flex-row justify-between items-center text-sm text-slate-500">
                <p>&copy; 2024 EnvyLashes. All rights reserved.</p>
            </div>
            
        </div>
    </footer>

    <script>
  // Initialize EmailJS
  emailjs.init('QQVbC9xiRo775QVY2'); // Replace with your actual EmailJS public key

  const allowedTimes = {
    weekday: ['09:00', '12:00', '15:00', '18:00'], // Monday–Friday
    saturday: ['16:30', '19:00'],                 // Saturday
  };

  const dateInput = document.getElementById('dateInput');
  const timeSelect = document.getElementById('timeSelect');
  const bookingForm = document.getElementById('bookingForm');
  const bookingStatus = document.getElementById('bookingStatus');

  // Set min date to today
  const today = new Date().toISOString().split('T')[0];
  dateInput.setAttribute('min', today);

  // Load service from URL params
  const params = new URLSearchParams(window.location.search);
  const service = params.get('service') || 'Unknown Service';
  document.getElementById('selectedService').textContent = `Service: ${service}`;
  document.getElementById('serviceInput').value = service;

  function getBookings() {
    return JSON.parse(localStorage.getItem('envyBookings') || '[]');
  }

  function saveBookings(bookings) {
    localStorage.setItem('envyBookings', JSON.stringify(bookings));
  }

  function isBooked(date, time) {
    const bookings = getBookings();
    return bookings.some((b) => b.date === date && b.time === time);
  }

  dateInput.addEventListener('change', () => {
    const selectedDate = dateInput.value;
    if (!selectedDate) {
      timeSelect.innerHTML =
        '<option value="" disabled selected>Select Time</option>';
      return;
    }

    // ✅ Use local time to get correct day
    const [year, month, dayOfMonth] = selectedDate.split('-').map(Number);
    const day = new Date(year, month - 1, dayOfMonth).getDay(); // 0 = Sunday, 6 = Saturday

    let times = [];

    if (day === 0) {
      // Sunday
      alert("We're closed on Sundays. Please select another date.");
      dateInput.value = '';
      timeSelect.innerHTML =
        '<option value="" disabled selected>Closed on Sundays</option>';
      return;
    } else if (day === 6) {
      // Saturday
      times = allowedTimes.saturday;
    } else {
      // Monday–Friday
      times = allowedTimes.weekday;
    }

    timeSelect.innerHTML =
      '<option value="" disabled selected>Select Time</option>';

    times.forEach((time) => {
      if (!isBooked(selectedDate, time)) {
        const option = document.createElement('option');
        option.value = time;
        option.textContent = formatTimeDisplay(time);
        timeSelect.appendChild(option);
      }
    });
  });

  function formatTimeDisplay(time) {
    const [h, m] = time.split(':').map(Number);
    const suffix = h >= 12 ? 'PM' : 'AM';
    const hour = h % 12 === 0 ? 12 : h % 12;
    return `${hour}:${m.toString().padStart(2, '0')} ${suffix}`;
  }

  bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    bookingStatus.textContent = '';
    bookingStatus.style.color = '';

    const booking = {
      service: document.getElementById('serviceInput').value,
      name: document.getElementById('name').value.trim(),
      email: document.getElementById('email').value.trim(),
      phone: document.getElementById('phone').value.trim(),
      date: dateInput.value,
      time: timeSelect.value,
    };

    if (!booking.time) {
      alert('Please select a time.');
      return;
    }

    if (isBooked(booking.date, booking.time)) {
      alert('This time slot is already booked. Please choose another time.');
      return;
    }

    const bookings = getBookings();
    bookings.push(booking);
    saveBookings(bookings);

    try {
      await emailjs.send('service_63rbqv31asd', 'template_gffz4d9', booking);
    } catch (err) {
      console.error('EmailJS error:', err);
    }

    try {
      await fetch('/.netlify/functions/sendSMS', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(booking),
      });
    } catch (err) {
      console.error('SMS sending error:', err);
    }

    bookingStatus.textContent =
      'Booking confirmed! You will receive a confirmation shortly.';
    bookingStatus.style.color = 'green';

    bookingForm.reset();
    timeSelect.innerHTML =
      '<option value="" disabled selected>Select Time</option>';
  });

  // Mobile menu toggle
  document.querySelectorAll('.dropdown-toggle').forEach(function (toggle) {
    toggle.addEventListener('click', function (e) {
      e.preventDefault();
      const parent = this.closest('.nav-dropdown');
      parent.classList.toggle('open');
    });
  });
</script>
</body>
</html>